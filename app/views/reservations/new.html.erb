<%= form_with(model: @reservation, url: facility_reservations_path, method: :post, local: true) do |f| %>
  <%= render partial: 'shared/facility_images', locals: { facility: @facility} %>
  <div class="card reservations-top">
    <div class="has-text-centered">
      <div class="is-centered">
        <h1 class="has-text-centered reservation-new-title">予約情報確認</h1>
        <%= render partial: 'shared/error_messages', locals: { obj: @reservation } %>
        <table class="table is-bordered is-fullwidth" id="reservation-new-tables">
          <tbody>
            <tr>
              <th>ご家族名前</th>
              <td>
                <%= current_user.name %>
                <%= f.hidden_field :reservation_user, :value => current_user.name %>
              </td>
            </tr>
            <tr>
              <th>メールアドレス</th>
              <td>
                <%= current_user.email %>
                <%= f.hidden_field :reservation_email, :value => current_user.email %>
              </td>
            </tr>
            <tr>
              <th>
                面会したい利用者
                <button class="button tag is-danger is-light is-rounded sign-tag">必須</button>
              </th>
              <td>
                <% current_user.residents.map do |resident| %>
                  <%= f.check_box :reservation_residents, {multiple: true}, resident.name, nil %>
                  <%= resident.name %>&nbsp;
                <% end %>
              </td>
            </tr>
            <tr>
              <th>予約日</th>
              <td>
                <% if @reservation.reservation_date.present? %>
                  <%= @reservation.reservation_date %>
                <% else %>
                  <%= l(params[:date].to_time, format: :date) %>
                <% end %>
              </td>
            </tr>
            <tr>
              <th>予約時間</th>
              <td>
                <% if @reservation.started_at.present? %>
                  <%= @reservation.started_at %>
                <% else %>
                  <%= l(params[:time].to_time, format: :time) %>
                <% end %>
              </td>
            </tr>
          </tbody>
        </table>
        <%= f.text_area :comment, :placeholder => "\uf303 面会時のご要望等あればご記入下さい。", class: "fa textarea" %>
        <%= f.hidden_field :facility_id, :value => params[:facility_id] %>
        <%= f.hidden_field :reservation_date, :value => params[:date] %>
        <%= f.hidden_field :started_at, :value => params[:time] %>
        <div>
          <%= f.submit "予約を決定する", class: "message-btn" %>
          <%= link_to "戻る", facility_reservations_path(facility_id: @facility.id), class: "button is-light back-btn" %>
        </div>
      </div>
    </div>
  </div>
<% end %>
