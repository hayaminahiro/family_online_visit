<section class="hero">
  <div class="hero-body">
    <div class="container">
      <h1 class="title has-text-centered">
       ご家族一覧
      </h1>
    </div>
  </div>
</section>

<div class="table-container">
	<table class="table is-fullwidth is-hoverable is-striped is-narrow">
		<thead>
			<tr>
				<th>名前</th>
				<th>入居者登録</th>
				<th>面会予約</th>
				<th>Room Nameの設定</th>
				<th>Room Name</th>
				<th></th>
				<th>編集</th>
				<th>削除</th>
			</tr>								
    </thead>
		<tbody>
			<% @users.each do |user| %>
			<tr>
				<td><%= user.name %></td>
				<td>
					<%= link_to "登録", '#', class: "button is-info" %>
				</td>
				<td>
					<%= link_to "予約", '#', class: "button is-link" %>
				</td>
				<td>
					<button class="button is-primary" id="open">
						<span><i class="fas fa-key"></i></span>
					</button>	
				</td>
				<td>
					<%= user.room_name %>
				</td>
				<td>
					<%= link_to video_room_user_path(user), class: "button is-warning" do %>
						<span><i class="fas fa-photo-video"></i></span>
					<% end %>
				</td>
				<td>
					<%= link_to edit_user_registration_path(user), class: "button is-success" do %>
						<span><i class="fas fa-user-edit"></i></span>
					<% end %>
				</td>
				<td>
					<%= link_to user_registration_path(user), method: :delete,
							data: {confirm: "削除してよろしいですか?"},
							class: "button is-danger" do %>
						<span><i class="far fa-trash-alt"></i></span>
					<% end %>
				</td>
			</tr>
			<% end %>
		</tbody>
	</table>
</div>

<!--面会用合言葉の登録モーダル-->

<div>
  <div class="modal">
    <div class="modal-background"></div>
    <div class="modal-card">
      <header class="modal-card-head">
        <p class="modal-card-title is-half has-text-weight-bold reserve-modal">Room Name登録</p>
        <button class="delete" aria-label="close" id="close"></button>
      </header>
      <section class="modal-card-body">
				<%= form_with(model: @user, local: true) do |f| %>
					<%= f.label :room_name, class: "label" %>
					<%= f.text_field :room_name, :placeholder => " \uf084 Room Nameを記入してください", class: "fa input is-link" %>
				<% end %>
      </section>
      <footer class="modal-card-foot">
				<%= link_to "登録", '#', class: "button is-success" %>
				<%= link_to "削除", '#', class: "button is-danger" %>
      </footer>
    </div>
  </div>
</div>

<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>

<script>
    $(document).ready(function() {
        $("#open").on("click", function() {
            $("div.modal").addClass("is-active");
        })

        $("#close, div.modal-background").on("click", function() {
            $("div.modal").removeClass("is-active");
        })
    });
</script>