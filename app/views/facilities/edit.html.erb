<div class="content has-text-centered">
  <div class="cp_tab" style="padding-top: 50px;">
    <input type="radio" name="cp_tab" id="tab1_1" aria-controls="first_tab01" checked>
    <label for="tab1_1">イメージ画像の設定</label>
    <input type="radio" name="cp_tab" id="tab1_2" aria-controls="second_tab01">
    <label for="tab1_2">基本情報の設定</label>
    <div class="cp_tabpanels">

      <div id="first_tab01" class="cp_tabpanel" style="padding-top: 20px;">
        <div class="columns is-centered">
          <div class="column is-6 top-btn-position is-centered">
            <%= form_with model: @facility, local: true, method: :patch do |f| %>
              <%= render partial: 'shared/error_messages', locals: { obj: @facility } %>
              <div class="facility-photo">
                <% if @facility.image? %>
                  <%= image_tag @facility.image.url, id: :img_prev, :size => '800x200' %>
                <% else %>
                  <%= image_tag "https://img-photo.s3-ap-northeast-1.amazonaws.com/uploads/content_image/facility_default.jpg", id: :img_prev, :size => '500x200' %>
                <% end %>
              </div>
              <div class="img_confirm">
                <%= f.label :image, "\uf574", class: "fa image_input_comment" %>
                <%= f.file_field :image, value: "upload", class: "image_uploading" %>
                <%= f.check_box :remove_image, id: "img_delete" %>
                <label for="img_delete" class="check_position has-text-weight-bold" style="position:absolute; margin-top: 310px;">使用中の画像を削除してデフォルト画像に戻したい場合のみチェックを入れて下さい。</label>
              </div>
              <div class="img_update">
                <%= f.submit "イメージ画像として登録", class: "button is-link is-medium is-fullwidth new-btn has-text-weight-bold" %>
              </div>
            <% end %>
          </div>
        </div>
      </div>

      <div id="second_tab01" class="cp_tabpanel" style="padding-top: 20px;">
        <div class="columns is-centered">
          <div class="column is-6 top-btn-position is-centered">
            <%= form_with model: @facility, local: true, method: :patch do |f| %>
              <%= render partial: 'shared/error_messages', locals: { obj: @facility } %>

              <div class="field" id="input-field">
                <%= f.label :facility_name,  class: "label" %><br />
                <%= f.text_field :facility_name, :placeholder => "\uf304 施設名を入力してください", autofocus: true, autocomplete: "name", class: "fa input is-medium input-top", :size=>"100px" %>
              </div>

              <div class="field" id="input-field">
                <%= f.label :email, class: "label" %><br />
                <%= f.email_field :email, :placeholder => "\uf0e0 メールアドレスを入力してください", autofocus: true, autocomplete: "email", class: "fa input is-medium input-top" %>
              </div>

              <div class="field" id="input-field">
                <%= f.label :password, class: "label" %><br />
                <%= f.password_field :password, :placeholder => "\uf13e パスワードを入力してください", autocomplete: "new-password", class: " fa input is-medium input-top" %>
              </div>

              <div class="field" id="input-field">
                <%= f.label :password_confirmation, "パスワード再確認", class: "label" %><br />
                <%= f.password_field :password_confirmation, :placeholder => "\uf13e パスワードを再入力してください", autocomplete: "new-password", class: "fa input is-medium input-top" %>
              </div>

              <div class="field" id="input-field">
                <%= f.label :current_password %><p>(変更を反映するには現在のパスワードを入力)</p><br>
                <%= f.password_field :current_password, :placeholder => "\uf13e 現在のパスワードを入力してください", autocomplete: "current-password", class: "fa input is-medium input-top" %>
              </div>

              <div class="actions" id="btn-field">
                <%= f.submit "基本情報を変更する", class: "button is-link is-medium is-fullwidth new-btn has-text-weight-bold" %>
              </div>

            <% end %>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>

<script>
  $(function() {
    function readURL(input) {
      if (input.files && input.files[0]) {
        var reader = new FileReader();
        reader.onload = function (e) {
          $('#img_prev').attr('src', e.target.result);
        }
        reader.readAsDataURL(input.files[0]);
      }
    }
    $(".image_uploading").change(function(){
      readURL(this);
    });
  });
</script>