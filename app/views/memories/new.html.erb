<nav class="panel" id="panel-style">
  <div class="notification">
    <div class="content has-text-centered">
      <div class="columns is-centered">
        <div class="column is-10 top-btn-position is-centered">
          <h1 class="account-title" style="color: #401c00;">お知らせの新規投稿ができます。</h1>
          <small style="float: right">現在時刻 <%= l(Time.zone.now, format: :short) %></small>
          <h1 class="mini-title" style="font-size: 20px; color: #401c00;">お知らせ画像設定</h1>
          <p class="title-description">ここからお知らせに使用する背景画像の設定ができます。</p>
          <%= form_with(model: @memory, url: facility_resident_memories_path(current_facility, @resident), method: :post, local: true) do |f| %>
            <%#= render partial: 'shared/error_messages', locals: { obj: @information } %>
            <div class="label-space">
              <%#= information_image(@information) %>
            </div>
            <div class="drop-zone-area">
              <%= f.label :images, "\uf574", class: "fa image_input_comment" %>
              <%= f.file_field :images, multiple: true %>
              <%= f.file_field :images, multiple: true, value: "upload", class: "image_uploading" %>
              <%= f.file_field :images, multiple: true, value: "upload", class: "image_uploading" %>
              <%= f.hidden_field :images_cache %>
            </div>
            <div class="position-control"><h1>位置調整</h1></div>
            <label class="media-left has-text-weight-bold">
              <h1 class="mini-title" style="font-size: 20px; color: #401c00;">お知らせタイトル</h1>
            </label>
            <div class="media-content">
              <div class="content label-space">
                <%= f.text_field :title, :placeholder => "\uf303 タイトルを入力してください", class: "fa input" %>
              </div>
            </div>
            <label class="media-left has-text-weight-bold">
              <h1 class="mini-title" style="font-size: 20px; color: #401c00;">本文</h1>
            </label>
            <div class="media-content">
              <div class="content label-space">
                <%= f.text_area :message, :placeholder => "\uf303 お知らせを入力してください", class: "fa textarea" %>
              </div>
            </div>
            <%= f.submit "お知らせを新規投稿する", class: "info-btn" %>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</nav>

<script>
    $(function() {
        function readURL(input) {
            if (input.files && input.files[0]) {
                var reader = new FileReader();
                reader.onload = function (e) {
                    $('#img_prev').attr('src', e.target.result);
                }
                reader.readAsDataURL(input.files[0]);
            }
        }
        $(".image_uploading").change(function(){
            readURL(this);
        });
    });
</script>